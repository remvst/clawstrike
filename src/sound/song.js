ZEROES = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

SONG = {
    "rowLen": 5513,
    "endPattern": 10,
    "songData": [
        {
            "osc1_oct": 7,
            "osc1_det": 0,
            "osc1_detune": 0,
            "osc1_xenv": 1,
            "osc1_vol": 255,
            "osc1_waveform": 0,
            "osc2_oct": 7,
            "osc2_det": 0,
            "osc2_detune": 0,
            "osc2_xenv": 1,
            "osc2_vol": 255,
            "osc2_waveform": 0,
            "noise_fader": 0,
            "env_attack": 100,
            "env_sustain": 0,
            "env_release": 3636,
            "env_master": 254,
            "fx_filter": 2,
            "fx_freq": 500,
            "fx_resonance": 254,
            "fx_delay_time": 0,
            "fx_delay_amt": 27,
            "fx_pan_freq": 0,
            "fx_pan_amt": 0,
            "lfo_osc1_freq": 0,
            "lfo_fx_freq": 0,
            "lfo_freq": 0,
            "lfo_amt": 0,
            "lfo_waveform": 0,
            "p": [
                2,
                2,
                2,
                2,
                2,
                2,
                2,
                2,
                2
            ],
            "c": [
                {
                    "n": ZEROES
                },
                {
                    "n": [
                        135,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        135,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        135,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        135,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    ]
                }
            ]
        },
        {
            "osc1_oct": 8,
            "osc1_det": 0,
            "osc1_detune": 0,
            "osc1_xenv": 1,
            "osc1_vol": 221,
            "osc1_waveform": 0,
            "osc2_oct": 8,
            "osc2_det": 0,
            "osc2_detune": 0,
            "osc2_xenv": 1,
            "osc2_vol": 210,
            "osc2_waveform": 0,
            "noise_fader": 255,
            "env_attack": 50,
            "env_sustain": 150,
            "env_release": 15454,
            "env_master": 229,
            "fx_filter": 3,
            "fx_freq": 11024,
            "fx_resonance": 240,
            "fx_delay_time": 6,
            "fx_delay_amt": 24,
            "fx_pan_freq": 0,
            "fx_pan_amt": 20,
            "lfo_osc1_freq": 0,
            "lfo_fx_freq": 1,
            "lfo_freq": 7,
            "lfo_amt": 64,
            "lfo_waveform": 0,
            "p": [
                3,
                3,
                3,
                3,
                3,
                3,
                3,
                3,
                3
            ],
            "c": [
                {
                    "n": ZEROES,
                },
                {
                    "n": ZEROES
                },
                {
                    "n": [
                        0,
                        0,
                        0,
                        0,
                        134,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        134,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        134,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        134,
                        0,
                        0,
                        0
                    ]
                }
            ]
        },
        {
            "osc1_oct": 7,
            "osc1_det": 0,
            "osc1_detune": 0,
            "osc1_xenv": 0,
            "osc1_vol": 192,
            "osc1_waveform": 1,
            "osc2_oct": 6,
            "osc2_det": 0,
            "osc2_detune": 9,
            "osc2_xenv": 0,
            "osc2_vol": 192,
            "osc2_waveform": 1,
            "noise_fader": 0,
            "env_attack": 137,
            "env_sustain": 2000,
            "env_release": 4611,
            "env_master": 192,
            "fx_filter": 1,
            "fx_freq": 982,
            "fx_resonance": 89,
            "fx_delay_time": 6,
            "fx_delay_amt": 25,
            "fx_pan_freq": 6,
            "fx_pan_amt": 77,
            "lfo_osc1_freq": 0,
            "lfo_fx_freq": 1,
            "lfo_freq": 3,
            "lfo_amt": 69,
            "lfo_waveform": 0,
            "p": [
                0,
                0,
                0,
                0,
                0,
                0,
                4,
                4
            ],
            "c": [
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": [
                        137,
                        0,
                        0,
                        144,
                        0,
                        0,
                        142,
                        0,
                        0,
                        144,
                        0,
                        0,
                        0,
                        149,
                        0,
                        0,
                        144,
                        0,
                        0,
                        142,
                        0,
                        0,
                        144,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    ]
                }
            ]
        },
        {
            "osc1_oct": 7,
            "osc1_det": 0,
            "osc1_detune": 0,
            "osc1_xenv": 0,
            "osc1_vol": 255,
            "osc1_waveform": 1,
            "osc2_oct": 7,
            "osc2_det": 0,
            "osc2_detune": 9,
            "osc2_xenv": 0,
            "osc2_vol": 154,
            "osc2_waveform": 1,
            "noise_fader": 0,
            "env_attack": 197,
            "env_sustain": 88,
            "env_release": 10614,
            "env_master": 45,
            "fx_filter": 0,
            "fx_freq": 11025,
            "fx_resonance": 255,
            "fx_delay_time": 2,
            "fx_delay_amt": 146,
            "fx_pan_freq": 3,
            "fx_pan_amt": 47,
            "lfo_osc1_freq": 0,
            "lfo_fx_freq": 0,
            "lfo_freq": 0,
            "lfo_amt": 0,
            "lfo_waveform": 0,
            "p": [
                0,
                5,
                5,
                0,
                0,
                0,
                0,
                0,
                5
            ],
            "c": [
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": [
                        125,
                        0,
                        0,
                        132,
                        0,
                        0,
                        130,
                        0,
                        0,
                        132,
                        0,
                        0,
                        137,
                        0,
                        0,
                        132,
                        0,
                        0,
                        130,
                        0,
                        0,
                        132,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    ]
                }
            ]
        },
        {
            "osc1_oct": 9,
            "osc1_det": 0,
            "osc1_detune": 0,
            "osc1_xenv": 0,
            "osc1_vol": 255,
            "osc1_waveform": 0,
            "osc2_oct": 9,
            "osc2_det": 0,
            "osc2_detune": 12,
            "osc2_xenv": 0,
            "osc2_vol": 255,
            "osc2_waveform": 0,
            "noise_fader": 0,
            "env_attack": 100,
            "env_sustain": 0,
            "env_release": 14545,
            "env_master": 70,
            "fx_filter": 0,
            "fx_freq": 0,
            "fx_resonance": 240,
            "fx_delay_time": 2,
            "fx_delay_amt": 157,
            "fx_pan_freq": 3,
            "fx_pan_amt": 47,
            "lfo_osc1_freq": 0,
            "lfo_fx_freq": 0,
            "lfo_freq": 0,
            "lfo_amt": 0,
            "lfo_waveform": 0,
            "p": [
                0,
                0,
                0,
                6,
                6
            ],
            "c": [
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": ZEROES
                },
                {
                    "n": [
                        137,
                        0,
                        0,
                        132,
                        0,
                        0,
                        130,
                        0,
                        0,
                        132,
                        0,
                        0,
                        137,
                        0,
                        0,
                        132,
                        0,
                        0,
                        130,
                        0,
                        0,
                        132,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    ]
                }
            ]
        }
    ],
    "songLen": 31
}

playSong = () => new MusicGenerator(SONG).createAudioBuffer(buffer => {
    const source = audioCtx.createBufferSource();
    source.buffer = buffer;
    source.loop = true;

    const gainNode = audioCtx.createGain();
    gainNode.gain.value = SONG_VOLUME;
    gainNode.connect(audioCtx.destination);
    source.connect(gainNode);
    source.nomangle(start)();

    playSong = () => 0;
    setSongVolume = (x) => gainNode.gain.value = x;
});

setSongVolume = () => 0;
